<!DOCTYPE html>
<html lang="es" data-theme="auto">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EC0249 · Plataforma Educativa de Consultoría</title>
  <meta name="description" content="Plataforma educativa interactiva para la certificación EC0249 - Proporcionar servicios de consultoría general">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>📚</text></svg>">
  <style>
    /* CSS Variables for Theming */
    :root {
      --primary-50: #eff6ff;
      --primary-100: #dbeafe;
      --primary-500: #3b82f6;
      --primary-600: #2563eb;
      --primary-700: #1d4ed8;
      --primary-900: #1e3a8a;
      
      --gray-50: #f9fafb;
      --gray-100: #f3f4f6;
      --gray-200: #e5e7eb;
      --gray-300: #d1d5db;
      --gray-400: #9ca3af;
      --gray-500: #6b7280;
      --gray-600: #4b5563;
      --gray-700: #374151;
      --gray-800: #1f2937;
      --gray-900: #111827;
      
      --success-500: #10b981;
      --warning-500: #f59e0b;
      --error-500: #ef4444;
      
      --bg-primary: var(--gray-50);
      --bg-secondary: #ffffff;
      --text-primary: var(--gray-900);
      --text-secondary: var(--gray-600);
      --border: var(--gray-200);
      --shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
      --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
    }
    
    /* Dark theme - system preference */
    @media (prefers-color-scheme: dark) {
      :root {
        --bg-primary: var(--gray-900);
        --bg-secondary: var(--gray-800);
        --text-primary: var(--gray-100);
        --text-secondary: var(--gray-400);
        --border: var(--gray-700);
        --shadow: 0 1px 3px 0 rgb(0 0 0 / 0.3), 0 1px 2px -1px rgb(0 0 0 / 0.3);
        --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.3), 0 4px 6px -4px rgb(0 0 0 / 0.3);
      }
    }

    /* Manual dark theme override */
    [data-theme="dark"] {
      --bg-primary: var(--gray-900);
      --bg-secondary: var(--gray-800);
      --text-primary: var(--gray-100);
      --text-secondary: var(--gray-400);
      --border: var(--gray-700);
      --shadow: 0 1px 3px 0 rgb(0 0 0 / 0.3), 0 1px 2px -1px rgb(0 0 0 / 0.3);
      --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.3), 0 4px 6px -4px rgb(0 0 0 / 0.3);
    }

    /* Manual light theme override */
    [data-theme="light"] {
      --bg-primary: var(--gray-50);
      --bg-secondary: #ffffff;
      --text-primary: var(--gray-900);
      --text-secondary: var(--gray-600);
      --border: var(--gray-200);
      --shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
      --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
    }

    /* Base Styles */
    * { 
      box-sizing: border-box;
      transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
    }
    
    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: var(--bg-primary);
      color: var(--text-primary);
      line-height: 1.6;
    }
    
    .app-container {
      min-height: 100vh;
      display: grid;
      grid-template-rows: auto 1fr auto;
    }

    /* Header Styles */
    .header {
      background: var(--bg-secondary);
      border-bottom: 1px solid var(--border);
      box-shadow: var(--shadow);
      position: sticky;
      top: 0;
      z-index: 100;
    }
    
    .header-content {
      max-width: 1200px;
      margin: 0 auto;
      padding: 1rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .logo {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      font-weight: 700;
      font-size: 1.25rem;
      color: var(--primary-600);
    }
    
    .logo-icon {
      width: 40px;
      height: 40px;
      background: linear-gradient(135deg, var(--primary-500), var(--primary-700));
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 1.5rem;
    }

    /* Navigation */
    .nav-tabs {
      display: flex;
      gap: 0.5rem;
      background: var(--gray-100);
      padding: 0.25rem;
      border-radius: 8px;
    }
    
    .nav-tab {
      padding: 0.5rem 1rem;
      background: transparent;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 500;
      color: var(--text-secondary);
      transition: all 0.2s;
    }
    
    .nav-tab.active {
      background: var(--bg-secondary);
      color: var(--primary-600);
      box-shadow: var(--shadow);
    }
    
    .nav-tab:hover:not(.active) {
      background: var(--gray-200);
    }

    /* Theme Toggle */
    .header-actions {
      display: flex;
      align-items: center;
      gap: 1rem;
    }
    
    .theme-toggle {
      width: 40px;
      height: 40px;
      border: none;
      border-radius: 8px;
      background: var(--gray-100);
      color: var(--text-primary);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
      transition: all 0.2s ease;
      position: relative;
      overflow: hidden;
    }
    
    .theme-toggle:hover {
      background: var(--gray-200);
      transform: scale(1.05);
    }
    
    .theme-toggle:active {
      transform: scale(0.95);
    }
    
    .theme-toggle-icon {
      transition: transform 0.3s ease;
    }
    
    .theme-toggle.changing .theme-toggle-icon {
      transform: rotate(180deg);
    }

    /* Header Controls */
    .header-controls {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    /* Language Toggle */
    .language-toggle {
      height: 40px;
      border: none;
      border-radius: 8px;
      background: var(--gray-100);
      color: var(--text-primary);
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0 0.75rem;
      font-size: 0.9rem;
      font-weight: 500;
      transition: all 0.2s ease;
      min-width: 60px;
    }
    
    .language-toggle:hover {
      background: var(--gray-200);
      transform: scale(1.05);
    }
    
    .language-toggle:active {
      transform: scale(0.95);
    }
    
    .language-toggle-icon {
      font-size: 1.1rem;
    }
    
    .language-text {
      font-weight: 600;
      letter-spacing: 0.5px;
    }

    /* Main Content */
    .main-content {
      max-width: 1200px;
      margin: 0 auto;
      padding: 2rem 1rem;
      display: grid;
      grid-template-columns: 280px 1fr;
      gap: 2rem;
    }
    
    @media (max-width: 968px) {
      .main-content {
        grid-template-columns: 1fr;
        gap: 1rem;
      }
    }

    /* Sidebar */
    .sidebar {
      background: var(--bg-secondary);
      border-radius: 12px;
      padding: 1.5rem;
      box-shadow: var(--shadow);
      height: fit-content;
      position: sticky;
      top: 100px;
    }
    
    .sidebar h3 {
      margin: 0 0 1rem 0;
      font-size: 1.1rem;
      color: var(--text-primary);
    }
    
    .sidebar-nav {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    
    .sidebar-nav li {
      margin-bottom: 0.5rem;
    }
    
    .sidebar-nav a {
      display: block;
      padding: 0.75rem;
      text-decoration: none;
      color: var(--text-secondary);
      border-radius: 8px;
      transition: all 0.2s;
    }
    
    .sidebar-nav a:hover,
    .sidebar-nav a.active {
      background: var(--primary-50);
      color: var(--primary-600);
    }

    /* Content Area */
    .content-area {
      background: var(--bg-secondary);
      border-radius: 12px;
      padding: 2rem;
      box-shadow: var(--shadow);
      min-height: 600px;
    }
    
    .content-area h1 {
      margin: 0 0 1.5rem 0;
      color: var(--text-primary);
      font-size: 2rem;
    }
    
    .content-area h2 {
      color: var(--text-primary);
      font-size: 1.5rem;
      margin: 2rem 0 1rem 0;
    }

    /* Cards */
    .card {
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 1.5rem;
      box-shadow: var(--shadow);
      margin-bottom: 1.5rem;
    }
    
    .card h3 {
      margin: 0 0 1rem 0;
      color: var(--text-primary);
    }

    /* Progress Components */
    .progress-bar {
      width: 100%;
      height: 8px;
      background: var(--gray-200);
      border-radius: 4px;
      overflow: hidden;
      margin: 1rem 0;
    }
    
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--primary-500), var(--primary-600));
      border-radius: 4px;
      transition: width 0.3s ease;
    }

    /* Buttons */
    .btn {
      padding: 0.75rem 1.5rem;
      border: none;
      border-radius: 8px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .btn-primary {
      background: var(--primary-500);
      color: white;
    }
    
    .btn-primary:hover {
      background: var(--primary-600);
    }
    
    .btn-secondary {
      background: var(--gray-200);
      color: var(--text-primary);
    }
    
    .btn-secondary:hover {
      background: var(--gray-300);
    }

    /* Module Overview Cards */
    .modules-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 1.5rem;
      margin: 2rem 0;
    }
    
    .module-card {
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 1.5rem;
      box-shadow: var(--shadow);
      transition: all 0.2s;
      cursor: pointer;
    }
    
    .module-card:hover {
      box-shadow: var(--shadow-lg);
      transform: translateY(-2px);
    }
    
    .module-header {
      display: flex;
      align-items: center;
      gap: 1rem;
      margin-bottom: 1rem;
    }
    
    .module-icon {
      width: 48px;
      height: 48px;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      color: white;
    }
    
    .module-1 .module-icon { background: linear-gradient(135deg, #10b981, #059669); }
    .module-2 .module-icon { background: linear-gradient(135deg, #3b82f6, #2563eb); }
    .module-3 .module-icon { background: linear-gradient(135deg, #8b5cf6, #7c3aed); }
    .module-4 .module-icon { background: linear-gradient(135deg, #f59e0b, #d97706); }
    
    .module-title {
      font-size: 1.25rem;
      font-weight: 600;
      margin: 0;
      color: var(--text-primary);
    }
    
    .module-description {
      color: var(--text-secondary);
      margin: 0.5rem 0 1rem 0;
    }
    
    .module-stats {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 0.875rem;
      color: var(--text-secondary);
    }

    /* Footer */
    .footer {
      background: var(--bg-secondary);
      border-top: 1px solid var(--border);
      padding: 2rem 1rem;
      text-align: center;
      color: var(--text-secondary);
    }

    /* Utilities */
    .hidden { display: none !important; }
    .text-center { text-align: center; }
    .text-success { color: var(--success-500); }
    .text-warning { color: var(--warning-500); }
    .text-error { color: var(--error-500); }
    
    /* Loading States */
    .loading {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 3rem;
    }
    
    .spinner {
      width: 40px;
      height: 40px;
      border: 3px solid var(--gray-300);
      border-top: 3px solid var(--primary-500);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
</head>
<body>
  <div class="app-container" id="app">
    <!-- Header -->
    <header class="header">
      <div class="header-content">
        <div class="logo">
          <div class="logo-icon">📚</div>
          <span>EC0249 Plataforma Educativa</span>
        </div>
        
        <div class="header-actions">
          <nav class="nav-tabs">
            <button class="nav-tab active" data-view="dashboard">Dashboard</button>
            <button class="nav-tab" data-view="modules">Módulos</button>
            <button class="nav-tab" data-view="assessment">Evaluación</button>
            <button class="nav-tab" data-view="portfolio">Portafolio</button>
          </nav>
          
          <div class="header-controls">
            <button class="language-toggle" id="languageToggle" title="Cambiar idioma">
              <span class="language-toggle-icon">🌐</span>
              <span class="language-text">ES</span>
            </button>
            
            <button class="theme-toggle" id="themeToggle" title="Cambiar tema">
              <span class="theme-toggle-icon">🔄</span>
            </button>
          </div>
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Sidebar -->
      <aside class="sidebar">
        <h3>Navegación</h3>
        <ul class="sidebar-nav">
          <li><a href="#" data-section="overview" class="active">Resumen General</a></li>
          <li><a href="#" data-section="module1">Módulo 1: Fundamentos</a></li>
          <li><a href="#" data-section="module2">Módulo 2: Identificación</a></li>
          <li><a href="#" data-section="module3">Módulo 3: Desarrollo</a></li>
          <li><a href="#" data-section="module4">Módulo 4: Presentación</a></li>
          <li><a href="#" data-section="templates">Plantillas</a></li>
          <li><a href="#" data-section="progress">Mi Progreso</a></li>
        </ul>
      </aside>

      <!-- Content Area -->
      <div class="content-area" id="contentArea">
        <!-- Dashboard View -->
        <div id="dashboardView">
          <h1>Panel de Control - EC0249</h1>
          <p>Bienvenido a la plataforma educativa para la certificación <strong>EC0249 - Proporcionar servicios de consultoría general</strong>. Esta plataforma te guiará a través de los tres elementos de competencia requeridos para tu certificación.</p>
          
          <div class="card">
            <h3>Tu Progreso General</h3>
            <div class="progress-bar">
              <div class="progress-fill" style="width: 15%"></div>
            </div>
            <p>15% completado - Continúa con el Módulo 1</p>
          </div>

          <div class="modules-grid">
            <div class="module-card module-1" data-module="1">
              <div class="module-header">
                <div class="module-icon">🎯</div>
                <div>
                  <h3 class="module-title">Módulo 1: Fundamentos</h3>
                </div>
              </div>
              <p class="module-description">Conceptos básicos de consultoría, ética y habilidades interpersonales.</p>
              <div class="module-stats">
                <span>4 lecciones</span>
                <span class="text-warning">En progreso</span>
              </div>
            </div>

            <div class="module-card module-2" data-module="2">
              <div class="module-header">
                <div class="module-icon">🔍</div>
                <div>
                  <h3 class="module-title">Módulo 2: Identificación</h3>
                </div>
              </div>
              <p class="module-description">Elemento 1: Identificar la situación/problema planteado. 8 productos requeridos.</p>
              <div class="module-stats">
                <span>8 plantillas</span>
                <span class="text-secondary">Bloqueado</span>
              </div>
            </div>

            <div class="module-card module-3" data-module="3">
              <div class="module-header">
                <div class="module-icon">💡</div>
                <div>
                  <h3 class="module-title">Módulo 3: Desarrollo</h3>
                </div>
              </div>
              <p class="module-description">Elemento 2: Desarrollar opciones de solución. 2 productos requeridos.</p>
              <div class="module-stats">
                <span>2 plantillas</span>
                <span class="text-secondary">Bloqueado</span>
              </div>
            </div>

            <div class="module-card module-4" data-module="4">
              <div class="module-header">
                <div class="module-icon">📋</div>
                <div>
                  <h3 class="module-title">Módulo 4: Presentación</h3>
                </div>
              </div>
              <p class="module-description">Elemento 3: Presentar la propuesta de solución. 5 productos requeridos.</p>
              <div class="module-stats">
                <span>5 plantillas</span>
                <span class="text-secondary">Bloqueado</span>
              </div>
            </div>
          </div>

          <div class="card">
            <h3>Próximos Pasos</h3>
            <ul>
              <li>Completar la introducción a los fundamentos de consultoría</li>
              <li>Revisar el código de ética y confidencialidad</li>
              <li>Familiarizarte con los 15 productos requeridos para la certificación</li>
            </ul>
            <a href="#" class="btn btn-primary" data-action="continue">Continuar Aprendizaje</a>
          </div>
        </div>

        <!-- Modules View -->
        <div id="modulesView" class="hidden">
          <h1>Módulos de Aprendizaje</h1>
          <p>Completa los cuatro módulos en secuencia para prepararte completamente para la evaluación EC0249.</p>
          
          <div class="modules-grid">
            <!-- Module cards will be populated by JavaScript -->
          </div>
        </div>

        <!-- Assessment View -->
        <div id="assessmentView" class="hidden">
          <h1>Centro de Evaluación</h1>
          <p>Practica tus habilidades en un entorno controlado antes de la evaluación oficial.</p>
          
          <div class="card">
            <h3>Simuladores Disponibles</h3>
            <ul>
              <li>Simulador de Entrevistas</li>
              <li>Entrenador de Presentaciones</li>
              <li>Evaluación de Conocimientos</li>
            </ul>
          </div>
        </div>

        <!-- Portfolio View -->
        <div id="portfolioView" class="hidden">
          <h1>Mi Portafolio</h1>
          <p>Gestiona y revisa todos tus documentos y evidencias para la certificación.</p>
          
          <div class="card">
            <h3>Elementos de Competencia</h3>
            <p>Track your progress across all three competency elements.</p>
          </div>
        </div>
      </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
      <p>&copy; 2024 EC0249 Plataforma Educativa. Desarrollado para la certificación en consultoría general según estándares CONOCER.</p>
    </footer>
  </div>

  <!-- Additional CSS for new components -->
  <style>
    /* Document Editor Styles */
    .document-editor {
      display: grid;
      grid-template-columns: 1fr 300px;
      gap: 2rem;
      height: calc(100vh - 200px);
    }
    
    .editor-header {
      grid-column: 1 / -1;
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
      padding-bottom: 1rem;
      border-bottom: 1px solid var(--border);
    }
    
    .editor-actions {
      display: flex;
      gap: 0.5rem;
    }
    
    .editor-sidebar {
      background: var(--bg-secondary);
      border-radius: 12px;
      padding: 1.5rem;
      box-shadow: var(--shadow);
      height: fit-content;
      position: sticky;
      top: 1rem;
    }
    
    .criteria-list {
      list-style: none;
      padding: 0;
      margin: 1rem 0;
    }
    
    .criteria-list li {
      padding: 0.5rem 0;
      border-bottom: 1px solid var(--border);
      font-size: 0.9rem;
    }
    
    .editor-content {
      background: var(--bg-secondary);
      border-radius: 12px;
      padding: 2rem;
      box-shadow: var(--shadow);
      overflow-y: auto;
    }
    
    .document-form {
      max-width: none;
    }
    
    .form-section {
      margin-bottom: 2rem;
      padding-bottom: 1.5rem;
      border-bottom: 1px solid var(--border);
    }
    
    .section-label {
      display: block;
      font-weight: 600;
      margin-bottom: 0.5rem;
      color: var(--text-primary);
    }
    
    .required-mark {
      color: var(--error-500);
      margin-left: 0.25rem;
    }
    
    .guidance {
      font-size: 0.9rem;
      color: var(--text-secondary);
      margin-bottom: 1rem;
      font-style: italic;
    }
    
    .form-textarea {
      width: 100%;
      min-height: 120px;
      padding: 0.75rem;
      border: 1px solid var(--border);
      border-radius: 8px;
      font-family: inherit;
      resize: vertical;
    }
    
    .character-count {
      text-align: right;
      font-size: 0.8rem;
      color: var(--text-secondary);
      margin-top: 0.25rem;
    }
    
    .repeatable-section .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
    }
    
    .repeatable-item {
      background: var(--gray-50);
      border-radius: 8px;
      padding: 1rem;
      margin-bottom: 1rem;
      border: 1px solid var(--border);
    }
    
    .item-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
    }
    
    /* Assessment Styles */
    .assessment-container {
      max-width: 800px;
      margin: 0 auto;
    }
    
    .assessment-header {
      background: var(--bg-secondary);
      border-radius: 12px;
      padding: 2rem;
      margin-bottom: 2rem;
      box-shadow: var(--shadow);
    }
    
    .assessment-meta {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 1rem;
    }
    
    .time-remaining {
      font-weight: 600;
      color: var(--primary-600);
    }
    
    .question-container {
      background: var(--bg-secondary);
      border-radius: 12px;
      padding: 2rem;
      margin-bottom: 2rem;
      box-shadow: var(--shadow);
    }
    
    .question-header {
      display: flex;
      justify-content: space-between;
      margin-bottom: 1rem;
    }
    
    .question-category {
      background: var(--primary-50);
      color: var(--primary-700);
      padding: 0.25rem 0.75rem;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: 600;
    }
    
    .options-container {
      margin: 1.5rem 0;
    }
    
    .option-label {
      display: flex;
      align-items: center;
      padding: 1rem;
      margin: 0.5rem 0;
      border: 2px solid var(--border);
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .option-label:hover {
      border-color: var(--primary-300);
      background: var(--primary-50);
    }
    
    .option-label input[type="radio"] {
      margin-right: 1rem;
    }
    
    /* Simulation Styles */
    .simulation-setup {
      max-width: 900px;
      margin: 0 auto;
    }
    
    .scenario-meta {
      display: flex;
      gap: 1rem;
      margin-top: 1rem;
    }
    
    .scenario-meta span {
      padding: 0.25rem 0.75rem;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: 600;
    }
    
    .difficulty.intermediate {
      background: var(--warning-500);
      color: white;
    }
    
    .briefing-content {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 1.5rem;
      margin: 1.5rem 0;
    }
    
    .context-card, .client-card, .audience-card {
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 1.5rem;
      box-shadow: var(--shadow);
    }
    
    .interview-simulation {
      height: calc(100vh - 150px);
      display: flex;
      flex-direction: column;
    }
    
    .simulation-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1rem 0;
      border-bottom: 1px solid var(--border);
      margin-bottom: 1rem;
    }
    
    .interview-interface {
      display: grid;
      grid-template-columns: 2fr 1fr;
      gap: 1.5rem;
      flex: 1;
      min-height: 0;
    }
    
    .conversation-area {
      display: flex;
      flex-direction: column;
      background: var(--bg-secondary);
      border-radius: 12px;
      padding: 1.5rem;
      box-shadow: var(--shadow);
    }
    
    .client-avatar {
      display: flex;
      align-items: center;
      gap: 1rem;
      margin-bottom: 1rem;
      padding-bottom: 1rem;
      border-bottom: 1px solid var(--border);
    }
    
    .avatar-circle {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: var(--primary-500);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: 600;
    }
    
    .client-status {
      font-size: 0.8rem;
      color: var(--success-500);
    }
    
    .conversation-log {
      flex: 1;
      overflow-y: auto;
      margin-bottom: 1rem;
      min-height: 300px;
    }
    
    .message {
      margin-bottom: 1rem;
      padding: 1rem;
      border-radius: 8px;
    }
    
    .client-message {
      background: var(--gray-100);
      margin-right: 2rem;
    }
    
    .user-message {
      background: var(--primary-50);
      margin-left: 2rem;
    }
    
    .message-sender {
      font-weight: 600;
      display: block;
      margin-bottom: 0.25rem;
    }
    
    .message-time {
      font-size: 0.8rem;
      color: var(--text-secondary);
      margin-top: 0.5rem;
      display: block;
    }
    
    .user-input-area textarea {
      width: 100%;
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 0.75rem;
      resize: vertical;
    }
    
    .input-controls {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 0.5rem;
    }
    
    .evaluation-panel {
      background: var(--bg-secondary);
      border-radius: 12px;
      padding: 1.5rem;
      box-shadow: var(--shadow);
      overflow-y: auto;
    }
    
    .criterion-track {
      margin-bottom: 0.75rem;
    }
    
    .criterion-status {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.5rem;
      border-radius: 6px;
      font-size: 0.9rem;
    }
    
    .criterion-status.pending {
      background: var(--gray-100);
      color: var(--text-secondary);
    }
    
    .criterion-status.completed {
      background: var(--success-500);
      color: white;
    }
    
    .notes-section textarea {
      width: 100%;
      min-height: 150px;
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 0.75rem;
      resize: vertical;
    }
    
    /* Portfolio Styles */
    .portfolio-overview {
      text-align: center;
      margin: 2rem 0;
    }
    
    .score-circle {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--primary-500), var(--primary-600));
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      margin: 0 auto 1rem;
      color: white;
    }
    
    .score-number {
      font-size: 2rem;
      font-weight: 700;
    }
    
    .score-label {
      font-size: 0.8rem;
      margin-top: 0.25rem;
    }
    
    .elements-breakdown {
      display: grid;
      gap: 1.5rem;
      margin: 2rem 0;
    }
    
    .element-status-card {
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 1.5rem;
      box-shadow: var(--shadow);
    }
    
    .element-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
    }
    
    .element-weight {
      background: var(--gray-200);
      padding: 0.25rem 0.75rem;
      border-radius: 20px;
      font-size: 0.8rem;
    }
    
    .progress-item {
      margin-bottom: 1rem;
    }
    
    .progress-item span {
      display: block;
      margin-bottom: 0.5rem;
      font-size: 0.9rem;
      color: var(--text-secondary);
    }
    
    /* Notification Styles */
    .notification {
      position: fixed;
      top: 20px;
      right: 20px;
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      border-radius: 8px;
      box-shadow: var(--shadow-lg);
      z-index: 1000;
      transform: translateX(100%);
      transition: transform 0.3s ease;
      max-width: 400px;
    }
    
    .notification.show {
      transform: translateX(0);
    }
    
    .notification-content {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 1rem;
    }
    
    .notification-icon {
      font-size: 1.25rem;
    }
    
    .notification-message {
      flex: 1;
      color: var(--text-primary);
    }
    
    .notification-close {
      background: none;
      border: none;
      font-size: 1.25rem;
      cursor: pointer;
      color: var(--text-secondary);
      padding: 0;
      width: 24px;
      height: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .notification-success {
      border-left: 4px solid var(--success-500);
    }
    
    .notification-error {
      border-left: 4px solid var(--error-500);
    }
    
    .notification-warning {
      border-left: 4px solid var(--warning-500);
    }
    
    .notification-info {
      border-left: 4px solid var(--primary-500);
    }

    /* Responsive Design */
    @media (max-width: 968px) {
      .header-content {
        flex-direction: column;
        gap: 1rem;
      }
      
      .header-actions {
        width: 100%;
        justify-content: space-between;
      }
      
      .nav-tabs {
        flex: 1;
      }
    }
    
    @media (max-width: 768px) {
      .document-editor {
        grid-template-columns: 1fr;
      }
      
      .interview-interface {
        grid-template-columns: 1fr;
      }
      
      .briefing-content {
        grid-template-columns: 1fr;
      }
      
      .nav-tabs {
        font-size: 0.9rem;
      }
      
      .nav-tab {
        padding: 0.4rem 0.8rem;
      }
    }
      
      .notification {
        right: 10px;
        left: 10px;
        max-width: none;
      }
    }
  </style>

  <script src="js/modules.js"></script>
  <script src="js/document-templates.js"></script>
  <script src="js/assessment-portfolio.js"></script>
  <script src="js/simulation-system.js"></script>
  <script src="js/i18n-manager.js"></script>

  <script>
    // Application State Management
    class EC0249App {
      constructor() {
        this.currentView = 'dashboard';
        this.currentSection = 'overview';
        this.userProgress = {
          module1: { theory: 25, practice: 0, assessment: false },
          module2: { theory: 0, practice: 0, assessment: false },
          module3: { theory: 0, practice: 0, assessment: false },
          module4: { theory: 0, practice: 0, assessment: false }
        };
        this.portfolioItems = [];
        this.currentTheme = 'auto'; // 'auto', 'light', 'dark'
        this.currentLanguage = 'es'; // 'es', 'en'
        this.i18n = new I18nManager();
        
        this.init();
      }
      
      async init() {
        this.setupEventListeners();
        this.loadUserData();
        this.initializeTheme();
        await this.initializeI18n();
        this.renderCurrentView();
      }
      
      setupEventListeners() {
        // Navigation tabs
        document.querySelectorAll('.nav-tab').forEach(tab => {
          tab.addEventListener('click', (e) => {
            this.switchView(e.target.dataset.view);
          });
        });
        
        // Sidebar navigation
        document.querySelectorAll('.sidebar-nav a').forEach(link => {
          link.addEventListener('click', (e) => {
            e.preventDefault();
            this.switchSection(e.target.dataset.section);
          });
        });
        
        // Module cards
        document.addEventListener('click', (e) => {
          if (e.target.closest('.module-card')) {
            const moduleNum = e.target.closest('.module-card').dataset.module;
            this.openModule(moduleNum);
          }
        });
        
        // Theme toggle
        const themeToggle = document.getElementById('themeToggle');
        if (themeToggle) {
          themeToggle.addEventListener('click', () => {
            this.toggleTheme();
          });
        }

        // Language toggle
        const languageToggle = document.getElementById('languageToggle');
        if (languageToggle) {
          languageToggle.addEventListener('click', () => {
            this.toggleLanguage();
          });
        }

        // Language change listener
        window.addEventListener('languageChanged', (e) => {
          this.currentLanguage = e.detail.language;
          this.updateLanguageToggle();
          this.updatePageContent();
        });
      }
      
      switchView(viewName) {
        this.currentView = viewName;
        
        // Update nav tabs
        document.querySelectorAll('.nav-tab').forEach(tab => {
          tab.classList.remove('active');
        });
        document.querySelector(`[data-view="${viewName}"]`).classList.add('active');
        
        // Update content
        this.renderCurrentView();
      }
      
      switchSection(sectionName) {
        this.currentSection = sectionName;
        
        // Update sidebar
        document.querySelectorAll('.sidebar-nav a').forEach(link => {
          link.classList.remove('active');
        });
        document.querySelector(`[data-section="${sectionName}"]`).classList.add('active');
        
        // Update content based on section
        this.renderCurrentSection();
      }
      
      renderCurrentView() {
        // Hide all views
        document.querySelectorAll('[id$="View"]').forEach(view => {
          view.classList.add('hidden');
        });
        
        // Show current view
        document.getElementById(`${this.currentView}View`).classList.remove('hidden');
        
        // Load view-specific content
        this.loadViewContent();
      }
      
      renderCurrentSection() {
        // This will be expanded to handle different sections
        console.log(`Rendering section: ${this.currentSection}`);
      }
      
      loadViewContent() {
        switch(this.currentView) {
          case 'modules':
            this.renderModulesContent();
            break;
          case 'assessment':
            this.renderAssessmentContent();
            break;
          case 'portfolio':
            this.renderPortfolioContent();
            break;
        }
      }
      
      renderModulesContent() {
        const modulesGrid = document.querySelector('#modulesView .modules-grid');
        if (!modulesGrid) return;
        
        const modules = [
          {
            num: 1,
            title: 'Fundamentos de Consultoría',
            description: 'Conceptos básicos, ética y habilidades interpersonales necesarias para la consultoría profesional.',
            icon: '🎯',
            lessons: 4,
            status: 'in_progress',
            progress: 25
          },
          {
            num: 2,
            title: 'Identificación del Problema',
            description: 'Elemento 1: Técnicas de entrevista, cuestionarios e investigación de campo.',
            icon: '🔍',
            lessons: 8,
            status: 'locked',
            progress: 0
          },
          {
            num: 3,
            title: 'Desarrollo de Soluciones',
            description: 'Elemento 2: Análisis de impacto y diseño de soluciones efectivas.',
            icon: '💡',
            lessons: 4,
            status: 'locked',
            progress: 0
          },
          {
            num: 4,
            title: 'Presentación de Propuestas',
            description: 'Elemento 3: Preparación y presentación profesional de propuestas.',
            icon: '📋',
            lessons: 6,
            status: 'locked',
            progress: 0
          }
        ];
        
        modulesGrid.innerHTML = modules.map(module => `
          <div class="module-card module-${module.num}" data-module="${module.num}">
            <div class="module-header">
              <div class="module-icon">${module.icon}</div>
              <div>
                <h3 class="module-title">Módulo ${module.num}: ${module.title}</h3>
              </div>
            </div>
            <p class="module-description">${module.description}</p>
            <div class="progress-bar">
              <div class="progress-fill" style="width: ${module.progress}%"></div>
            </div>
            <div class="module-stats">
              <span>${module.lessons} lecciones</span>
              <span class="${module.status === 'in_progress' ? 'text-warning' : module.status === 'locked' ? 'text-secondary' : 'text-success'}">
                ${module.status === 'in_progress' ? 'En progreso' : module.status === 'locked' ? 'Bloqueado' : 'Completado'}
              </span>
            </div>
          </div>
        `).join('');
      }
      
      renderAssessmentContent() {
        // Will be expanded with assessment tools
      }
      
      renderPortfolioContent() {
        // Will be expanded with portfolio management
      }
      
      openModule(moduleNum) {
        if (this.moduleSystem) {
          const moduleId = `module${moduleNum}`;
          const contentArea = document.getElementById('contentArea');
          contentArea.innerHTML = this.moduleSystem.renderModuleContent(moduleId);
          this.switchSection(`module${moduleNum}`);
        }
      }
      
      loadUserData() {
        // Load from localStorage or API
        const savedProgress = localStorage.getItem('ec0249_progress');
        if (savedProgress) {
          this.userProgress = JSON.parse(savedProgress);
        }
        
        // Load theme preference
        const savedTheme = localStorage.getItem('ec0249_theme');
        if (savedTheme && ['auto', 'light', 'dark'].includes(savedTheme)) {
          this.currentTheme = savedTheme;
        }

        // Load language preference
        const savedLanguage = localStorage.getItem('ec0249_language');
        if (savedLanguage && ['es', 'en'].includes(savedLanguage)) {
          this.currentLanguage = savedLanguage;
        }
      }
      
      saveUserData() {
        localStorage.setItem('ec0249_progress', JSON.stringify(this.userProgress));
      }
      
      calculateOverallProgress() {
        const modules = Object.values(this.userProgress);
        const totalProgress = modules.reduce((sum, module) => {
          return sum + (module.theory + module.practice) / 2;
        }, 0);
        return Math.round(totalProgress / modules.length);
      }

      // Theme Management
      initializeTheme() {
        // Apply the loaded theme and update UI
        this.applyTheme();
        this.updateThemeToggleIcon();
      }
      
      toggleTheme() {
        // Cycle through themes: auto → light → dark → auto
        const themes = ['auto', 'light', 'dark'];
        const currentIndex = themes.indexOf(this.currentTheme);
        const nextIndex = (currentIndex + 1) % themes.length;
        this.currentTheme = themes[nextIndex];
        
        // Add animation class
        const toggleButton = document.getElementById('themeToggle');
        if (toggleButton) {
          toggleButton.classList.add('changing');
          setTimeout(() => {
            toggleButton.classList.remove('changing');
          }, 300);
        }
        
        this.applyTheme();
        this.updateThemeToggleIcon();
        this.saveThemePreference();
        
        // Show notification
        const themeNames = {
          'auto': 'Automático (sigue el sistema)',
          'light': 'Claro',
          'dark': 'Oscuro'
        };
        this.showNotification(`Tema cambiado a: ${themeNames[this.currentTheme]}`, 'info');
      }
      
      applyTheme() {
        const htmlElement = document.documentElement;
        htmlElement.setAttribute('data-theme', this.currentTheme);
      }
      
      updateThemeToggleIcon() {
        const iconElement = document.querySelector('.theme-toggle-icon');
        if (!iconElement) return;
        
        const icons = {
          'auto': '🔄',
          'light': '☀️',
          'dark': '🌙'
        };
        
        const titles = {
          'auto': 'Tema automático (sigue el sistema)',
          'light': 'Tema claro',
          'dark': 'Tema oscuro'
        };
        
        iconElement.textContent = icons[this.currentTheme];
        
        const toggleButton = document.getElementById('themeToggle');
        if (toggleButton) {
          toggleButton.title = `${titles[this.currentTheme]} - Click para cambiar`;
        }
      }
      
      saveThemePreference() {
        localStorage.setItem('ec0249_theme', this.currentTheme);
      }

      // I18n Management
      async initializeI18n() {
        await this.i18n.init();
        this.currentLanguage = this.i18n.getCurrentLanguage();
        this.updateLanguageToggle();
        this.updatePageContent();
      }

      async toggleLanguage() {
        const success = await this.i18n.toggleLanguage();
        if (success) {
          this.currentLanguage = this.i18n.getCurrentLanguage();
          this.updateLanguageToggle();
          this.updatePageContent();
          
          // Show notification
          const message = this.i18n.t('language.changed');
          this.showNotification(message, 'info');
        }
      }

      updateLanguageToggle() {
        const textElement = document.querySelector('.language-text');
        const toggleButton = document.getElementById('languageToggle');
        
        if (textElement) {
          textElement.textContent = this.currentLanguage.toUpperCase();
        }
        
        if (toggleButton) {
          const title = this.i18n.t('language.toggle');
          const currentLangName = this.i18n.getLanguageDisplayName(this.currentLanguage);
          toggleButton.title = `${title} (${currentLangName})`;
        }
      }

      updatePageContent() {
        // Update page title
        document.title = this.i18n.t('app.title');
        
        // Update meta description
        const metaDesc = document.querySelector('meta[name="description"]');
        if (metaDesc) {
          metaDesc.content = this.i18n.t('app.description');
        }

        // Update navigation tabs
        const navTabs = {
          'dashboard': 'navigation.dashboard',
          'modules': 'navigation.modules', 
          'assessment': 'navigation.assessment',
          'portfolio': 'navigation.portfolio'
        };

        Object.entries(navTabs).forEach(([view, key]) => {
          const tab = document.querySelector(`[data-view="${view}"]`);
          if (tab) {
            tab.textContent = this.i18n.t(key);
          }
        });

        // Update sidebar navigation
        const sidebarLinks = {
          'overview': 'navigation.overview',
          'progress': 'navigation.progress',
          'documents': 'navigation.documents',
          'certification': 'navigation.certificationPath'
        };

        Object.entries(sidebarLinks).forEach(([section, key]) => {
          const link = document.querySelector(`[data-section="${section}"]`);
          if (link) {
            link.textContent = this.i18n.t(key);
          }
        });

        // Update content based on current view
        this.updateViewContent();
        
        // Update footer
        const footer = document.querySelector('.footer p');
        if (footer) {
          footer.textContent = this.i18n.t('app.footer');
        }
      }

      updateViewContent() {
        // Update content based on current view
        switch (this.currentView) {
          case 'dashboard':
            this.updateDashboardContent();
            break;
          case 'modules':
            this.updateModulesContent();
            break;
          case 'assessment':
            this.updateAssessmentContent();
            break;
          case 'portfolio':
            this.updatePortfolioContent();
            break;
        }
      }

      updateDashboardContent() {
        const welcomeTitle = document.querySelector('#dashboardView h1');
        const welcomeSubtitle = document.querySelector('#dashboardView .hero-subtitle');
        
        if (welcomeTitle) welcomeTitle.textContent = this.i18n.t('dashboard.welcome');
        if (welcomeSubtitle) welcomeSubtitle.textContent = this.i18n.t('dashboard.subtitle');
        
        // Update other dashboard elements as needed
      }

      updateModulesContent() {
        const modulesTitle = document.querySelector('#modulesView h1');
        const modulesSubtitle = document.querySelector('#modulesView > p');
        
        if (modulesTitle) modulesTitle.textContent = this.i18n.t('modules.title');
        if (modulesSubtitle) modulesSubtitle.textContent = this.i18n.t('modules.subtitle');
      }

      updateAssessmentContent() {
        const assessmentTitle = document.querySelector('#assessmentView h1');
        const assessmentSubtitle = document.querySelector('#assessmentView > p');
        
        if (assessmentTitle) assessmentTitle.textContent = this.i18n.t('assessment.title');
        if (assessmentSubtitle) assessmentSubtitle.textContent = this.i18n.t('assessment.subtitle');
      }

      updatePortfolioContent() {
        const portfolioTitle = document.querySelector('#portfolioView h1');
        const portfolioSubtitle = document.querySelector('#portfolioView > p');
        
        if (portfolioTitle) portfolioTitle.textContent = this.i18n.t('portfolio.title');
        if (portfolioSubtitle) portfolioSubtitle.textContent = this.i18n.t('portfolio.subtitle');
      }

      // Notification system
      showNotification(message, type = 'info') {
        const notification = document.createElement('div');
        notification.className = `notification notification-${type}`;
        notification.innerHTML = `
          <div class="notification-content">
            <span class="notification-icon">${this.getNotificationIcon(type)}</span>
            <span class="notification-message">${message}</span>
            <button class="notification-close" onclick="this.parentElement.parentElement.remove()">×</button>
          </div>
        `;
        
        // Add to page
        document.body.appendChild(notification);
        
        // Auto-remove after 5 seconds
        setTimeout(() => {
          if (notification.parentElement) {
            notification.remove();
          }
        }, 5000);
        
        // Animate in
        setTimeout(() => {
          notification.classList.add('show');
        }, 100);
      }

      getNotificationIcon(type) {
        const icons = {
          'success': '✅',
          'error': '❌',
          'warning': '⚠️',
          'info': 'ℹ️'
        };
        return icons[type] || 'ℹ️';
      }
    }
    
    // Initialize the application
    document.addEventListener('DOMContentLoaded', () => {
      window.ec0249App = new EC0249App();
    });
  </script>
</body>
</html>